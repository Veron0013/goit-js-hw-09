{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["import JustValidate from \"just-validate\";\n\nlet LOCAL_VALUES = \"feedback-form-state\";\n\nlet formData = getStorageData();\n\nupdateText();\n\nconst currentForm = document.querySelector(\".feedback-form\");\n\ncurrentForm.addEventListener(\"input\", (e) => {\n\tif (e.target.name != \"email\" && e.target.name != \"message\") { return; }\n\n\tupdateLocalStorage(prepareData(e.target.name, e.target.value));\n\n});\n\nfunction prepareData(key, inputData) {\n\tformData[key] = inputData.trim();\n\n\treturn JSON.stringify(formData);\n}\n\nfunction updateLocalStorage(dataUpdate) {\n\tlocalStorage.setItem(LOCAL_VALUES, dataUpdate);\n}\n\nfunction getStorageData() {\n\treturn JSON.parse(localStorage.getItem(LOCAL_VALUES)) || { email: \"\", message: \"\" };\n}\n\nfunction updateText() {\n\tformData = getStorageData();\n\tfor (const key in formData) {\n\t\tconst keyValue = formData[key]\n\t\tdocument.querySelector(`#${key}`).value = keyValue;\n\n\t\tupdateLocalStorage(prepareData(key, keyValue));\n\t}\n}\n\n//валідатор - ми ж бібліотеки вивчаємо, правда\nconst validator = new JustValidate('.feedback-form');\nvalidator\n\t.addField('.form-input', [\n\t\t{\n\t\t\trule: 'required',\n\t\t\terrorMessage: \"Поле email - обов'язкове\",\n\t\t},\n\t\t{\n\t\t\trule: 'required',\n\t\t},\n\t\t{\n\t\t\trule: 'email',\n\t\t\terrorMessage: 'Не правильний формат. Перевірте ще раз.'\n\t\t},\n\t])\n\t.addField('.form-text', [\n\t\t{\n\t\t\tvalidator: (value) => {\n\t\t\t\treturn value !== undefined && String(value).trim().length > 3;\n\t\t\t},\n\t\t\terrorMessage: 'Повідомлення повинне бути не менше 3 символів. З трьох символів лише погані повідомлення',\n\t\t},\n\t])\n\t.onSuccess(() => {\n\t\tconsole.log(\"success\", formData);\n\t\tlocalStorage.removeItem(LOCAL_VALUES);\n\t\tformData = getStorageData();\n\t\tcurrentForm.reset();\n\t\t//console.log(formData, localStorage.getItem(LOCAL_VALUES));\n\n\t});"],"names":["LOCAL_VALUES","formData","getStorageData","updateText","currentForm","updateLocalStorage","prepareData","key","inputData","dataUpdate","keyValue","validator","JustValidate","value"],"mappings":"wIAEA,IAAIA,EAAe,sBAEfC,EAAWC,EAAc,EAE7BC,IAEA,MAAMC,EAAc,SAAS,cAAc,gBAAgB,EAE3DA,EAAY,iBAAiB,QAAU,GAAM,CACxC,EAAE,OAAO,MAAQ,SAAW,EAAE,OAAO,MAAQ,WAEjDC,EAAmBC,EAAY,EAAE,OAAO,KAAM,EAAE,OAAO,KAAK,CAAC,CAE9D,CAAC,EAED,SAASA,EAAYC,EAAKC,EAAW,CACpC,OAAAP,EAASM,CAAG,EAAIC,EAAU,KAAI,EAEvB,KAAK,UAAUP,CAAQ,CAC/B,CAEA,SAASI,EAAmBI,EAAY,CACvC,aAAa,QAAQT,EAAcS,CAAU,CAC9C,CAEA,SAASP,GAAiB,CACzB,OAAO,KAAK,MAAM,aAAa,QAAQF,CAAY,CAAC,GAAK,CAAE,MAAO,GAAI,QAAS,EAAE,CAClF,CAEA,SAASG,GAAa,CACrBF,EAAWC,EAAc,EACzB,UAAWK,KAAON,EAAU,CAC3B,MAAMS,EAAWT,EAASM,CAAG,EAC7B,SAAS,cAAc,IAAIA,CAAG,EAAE,EAAE,MAAQG,EAE1CL,EAAmBC,EAAYC,EAAKG,CAAQ,CAAC,CAC7C,CACF,CAGA,MAAMC,EAAY,IAAIC,EAAa,gBAAgB,EACnDD,EACE,SAAS,cAAe,CACxB,CACC,KAAM,WACN,aAAc,0BACd,EACD,CACC,KAAM,UACN,EACD,CACC,KAAM,QACN,aAAc,yCACd,CACH,CAAE,EACA,SAAS,aAAc,CACvB,CACC,UAAYE,GACJA,IAAU,QAAa,OAAOA,CAAK,EAAE,KAAM,EAAC,OAAS,EAE7D,aAAc,0FACd,CACH,CAAE,EACA,UAAU,IAAM,CAChB,QAAQ,IAAI,UAAWZ,CAAQ,EAC/B,aAAa,WAAWD,CAAY,EACpCC,EAAWC,EAAc,EACzBE,EAAY,MAAK,CAGnB,CAAE"}